import re


def extract_plot_number1(text):
    """
    Обробляє вхідний рядок, видаляючи слово "Ділянка" (без врахування регістру)
    та символ "№" (якщо він є), повертаючи лише числову частину.

    Приклад:
      "25"            -> "25"
      "Ділянка № 25"  -> "25"
      "Ділянка  25"   -> "25"
      "№ 25"         -> "25"

    Якщо після обробки результат порожній, повертає None.
    """
    if not isinstance(text, str):
        text = str(text)
    # Видаляємо слово "Ділянка" з можливим наступним символом "№" та пробілами
    cleaned = re.sub(r'(?i)\s*Ділянка\s*№?\s*', '', text).strip()
    # Видаляємо, якщо залишився, символ "№" на початку рядка.
    # Inline flag (?i) повинен бути на самому початку шаблону.
    cleaned = re.sub(r'(?i)^№\s*', '', cleaned).strip()
    return cleaned if cleaned else None

a=  ["  25", "Ділянка № 25  ", "Ділянка  25", "№ 25", "№25", "    Ділянка  25"]
for x in a:
    print(extract_plot_number1(x))
import re


def extract_plot_number(value):
    """
    Обробляє вхідне значення або список значень, видаляючи слово "Ділянка" (без врахування регістру)
    та символ "№" (якщо він є), повертаючи лише числову частину (тобто рядок, що містить цифри).

    Якщо в результаті очищення не знайдено жодної цифри, функція повертає None.

    Приклади:
      "25"            -> "25"
      "Ділянка № 25"  -> "25"
      "Ділянка  25"   -> "25"
      "№ 25"         -> "25"

    Якщо передано список, функція перебирає елементи і повертає перший знайдений номер.
    """

    def process(text):
        # Переконуємося, що працюємо з рядком
        if not isinstance(text, str):
            text = str(text)
        # Видаляємо слово "Ділянка" з опціональним символом "№" та пробілами
        cleaned = re.sub(r'(?i)\s*Ділянка\s*№?\s*', '', text).strip()
        # Видаляємо, якщо залишився, символ "№" на початку рядка
        cleaned = re.sub(r'(?i)^№\s*', '', cleaned).strip()
        # Якщо в очищеному тексті є хоча б одна цифра, повертаємо його, інакше - None
        return cleaned if re.search(r'\d', cleaned) else None

    if isinstance(value, list):
        for item in value:
            res = process(item)
            if res is not None:
                return res
        return None
    else:
        return process(value)


# Приклади використання:
inputs = [
    "  25",
    "Ділянка № 25  ",
    "Ділянка  25",
    "№ 25",
    "Примітка: розташована на відстані 3.5 км",  # не містить цифр — поверне None
    ["Примітка: текст", "Ділянка № 47", "Щось ще"],
]

for inp in inputs:
    print(f"{inp!r} -> {extract_plot_number(inp)!r}")
